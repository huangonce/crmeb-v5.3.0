(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{459:function(t,e,r){var content=r(498);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(3).default)("251de34b",content,!0,{sourceMap:!1})},496:function(t,e,r){t.exports=r.p+"img/alipay.540f0a4.png"},497:function(t,e,r){"use strict";r(459)},498:function(t,e,r){var o=r(2)((function(i){return i[1]}));o.push([t.i,".wxPay .header[data-v-6197a2b9]{color:#999;height:60px;line-height:60px}.wxPay .header .home[data-v-6197a2b9]{color:#282828}.wxPay .wrapper[data-v-6197a2b9]{background-color:#fff;padding:26px 30px}.wxPay .wrapper .title[data-v-6197a2b9]{font-size:20px;margin-bottom:51px}.wxPay .wrapper .title .amount[data-v-6197a2b9]{color:#969696;font-size:14px}.wxPay .wrapper .title .amount .num[data-v-6197a2b9]{font-size:22px;font-weight:700}.wxPay .wrapper .wx[data-v-6197a2b9]{width:310px}.wxPay .wrapper .wx .pictrue[data-v-6197a2b9]{border:1px solid #ccc;height:310px;width:100%}.wxPay .wrapper .wx .pictrue img[data-v-6197a2b9]{height:100%;width:100%}.wxPay .wrapper .wx .text[data-v-6197a2b9]{background-color:#1676ff;color:#fff;font-size:14px;height:72px;margin-top:16px;width:100%}.wxPay .wrapper .wx .text .iconfont[data-v-6197a2b9]{font-size:50px;margin-right:30px}.wxPay .wrapper .wx .text .tip[data-v-6197a2b9]{margin-top:4px}.wxPay .wrapper .phone[data-v-6197a2b9]{height:399px;margin-left:144px;width:262px}.wxPay .wrapper .phone img[data-v-6197a2b9]{height:100%;width:100%}.wxPay .wrapper .selectPay[data-v-6197a2b9]{color:#236fe9;cursor:pointer;font-size:16px;margin-top:68px}.wxPay .wrapper .selectPay .iconfont[data-v-6197a2b9]{font-size:15px;margin-right:16px}",""]),o.locals={},t.exports=o},619:function(t,e,r){"use strict";r.r(e);var o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text acea-row row-center-wrapper"},[e("div",{staticClass:"iconfont icon-saoyisao"}),t._v(" "),e("div",[e("div",[t._v("请使用支付宝扫一扫")]),t._v(" "),e("div",{staticClass:"tip"},[t._v("扫描二维码支付")])])])},function(){var t=this._self._c;return t("div",{staticClass:"phone"},[t("img",{attrs:{src:r(496)}})])}],n=(r(19),{name:"wxPay",auth:"guest",data:function(){return{orderId:0,totalPrice:0,codeUrl:"",logo:"",invalid:0,endTime:"",timeName:null,quitUrl:""}},watch:{endTime:function(t){0===t&&clearInterval(this.timeName)}},fetch:function(t){var e=t.store;e.commit("isHeader",!0),e.commit("isFooter",!0)},head:function(){return{title:"支付宝支付-"+this.$store.state.titleCon}},created:function(){this.orderId=this.$route.query.orderId,this.totalPrice=this.$route.query.totalPrice},mounted:function(){this.quitUrl=window.location.protocol+"//"+window.location.host+"/order_detail"+"?orderId=".concat(this.orderId),this.goAli()},beforeDestroy:function(){clearInterval(this.timeName)},methods:{aliSuccess:function(){var t=this;t.$axios.get("/pc/check_order_status/"+t.orderId+"/"+t.invalid).then((function(e){t.endTime=e.data.time,e.data.status&&(clearInterval(t.timeName),t.$message.success("支付成功"),t.$store.commit("cartNum",0),t.getOrderCoupon(t.orderId),setTimeout((function(){t.$router.replace({path:"/order_detail",query:{orderId:t.orderId}})}),1e3))})).catch((function(e){t.$message.error(e),setTimeout((function(){t.$router.replace({path:"/"})}),1e3)}))},getOrderCoupon:function(t){this.$axios.post("/v2/order/product_coupon/"+t).then((function(t){}))},Return:function(){this.$router.go(-1)},goAli:function(){var t=this,e=this;e.$axios.post("/order/pay",{uni:e.orderId,paytype:"alipay",from:"pc",quitUrl:this.quitUrl}).then((function(r){e.codeUrl=r.data.result.jsConfig.qrCode,e.invalid=r.data.result.jsConfig.invalid,t.timeName=setInterval((function(){t.aliSuccess()}),2e3)})).catch((function(t){e.$message.error(t)}))}}}),c=(r(497),r(16)),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wxPay wrapper_1200"},[e("div",{staticClass:"header"},[e("span",{staticClass:"home"},[t._v("首页 > 个人中心 > 确认订单 >")]),t._v(" 订单号："+t._s(t.orderId)+"\n  ")]),t._v(" "),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"title acea-row row-between-wrapper"},[e("div",[t._v("支付宝支付")]),t._v(" "),e("div",{staticClass:"amount"},[t._v("\n        应付金额："),e("span",{staticClass:"num font-color"},[t._v(t._s(t.totalPrice))]),t._v("元\n      ")])]),t._v(" "),e("div",{staticClass:"acea-row row-center-wrapper"},[e("div",{staticClass:"wx"},[e("div",{staticClass:"pictrue"},[e("client-only",[e("vue-qr",{staticClass:"bicode",attrs:{logoSrc:t.logo,text:t.codeUrl,size:310}})],1)],1),t._v(" "),t._m(0)]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"selectPay",on:{click:t.Return}},[e("span",{staticClass:"iconfont icon-fanhui"}),t._v("选择其他支付方式\n    ")])])])}),o,!1,null,"6197a2b9",null);e.default=component.exports}}]);